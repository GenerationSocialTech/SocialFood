<div class="row">
  <div class="col-md-12">
    <app-perfil-lateral></app-perfil-lateral>
  </div>
</div>  
<div class="container"> 

  <div class="row"> 


    <div class="col-md-12">
      <div class="row">
        <div class="col-md-8">
          
            <h3 class="d-flex justify-content-start mb-4 text">Faça uma Postagem</h3>
            <button class="btn btn-link botao" data-toggle="collapse" data-target="#dados">Nova postagem</button>
          
         <div id="dados" class="collapse">
          <div class="form-group">
            <label class="text font-weight-bold
            " for="titulo">Título:</label>
            <input type="text" class="form-control" id="titulo" placeholder="Digite aqui o seu titulo" [(ngModel)]='postagem.titulo'>
          </div>
    
          <div class="form-group">
              <label class= "text font-weight-bold
              " for="regiao">Região</label>
              <input type="text" class="form-control" id="regiao"  placeholder="Digite aqui sua regiao" [(ngModel)]='postagem.regiao'>
         </div>
    
         <div class="form-group">
          <label class ="text font-weight-bold
          " for="descricao">Descrição</label>
          <textarea class="form-control" id="descricao" rows="3" placeholder = "Digite aqui a descrição da sua postagem" [(ngModel)]='postagem.descricao' ></textarea>
         </div>
    
    
          <div class="row d-flex align-items-end">
    
            <div class="col-md-6">
              <div class="form-group m-0">
                <label class="text font-weight-bold
                " for="tema">Escolha um tema ou <a routerLink='/cadastro-tema'>Cadastre um novo</a></label>
                <select name="tema" id='tema' class="form-control" [(ngModel)]='idTema' (change)='findByIdTema()'>
                  <option *ngFor='let item of listaTemas' value={{item.id}}>
                    {{item.tema}}
                  </option>
                </select> 
              </div>
              
            </div>
          </div>
          <div class="form-group">
            <label class= "text font-weight-bold
            " for="imagem">Deseja adicionar uma imagem?</label>
            <input type="text" class="form-control" id="imagem"  placeholder="Coloque o link da sua imagem aqui" [(ngModel)]='postagem.imagem'>
           </div>
           
          <button type="button" class="btn btn-outline-info w-100 botao justify-content-center" (click)='publicar()'>Publicar</button>

        </div>


        </div>
      </div>

      

      <hr class="mt-5 mb-5">

      <nav class="d-flex justify-content-center">
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
          <a class="nav-item nav-link active text-secondary font-weight-bold" id="nav-home-tab" data-toggle="tab" href="#minhas-postagens"
            role="tab" aria-controls="nav-home" aria-selected="true">Minhas Postagens</a>

          <a class="nav-item nav-link text-secondary font-weight-bold" id="nav-profile-tab" data-toggle="tab" href="#postagens-temas" role="tab"
            aria-controls="nav-profile" aria-selected="false">Postagens por tema</a>
        </div>
      </nav>

      <div class="tab-content" id="nav-tabContent">

        <div class="tab-pane fade show active" id="minhas-postagens" role="tabpanel" aria-labelledby="nav-postagens-tab">
          <div class="row mt-3 mb-3">
            <div class="col-md-10 pr-0">
              <input class="form-control w-100" type="search" placeholder="Pesquisar postagem" aria-label="Pesquisar" [(ngModel)]='titulo'>
            </div>
            <div class="col-md-2 d-flex">
              <button class="btn btn-outline-warning w-100 botao mb-0 mt-0" type="button" (click)='findByTituloPostagem()'>Pesquisar</button>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <div class="card mt-5 mb-5 fluid"  *ngFor="let item of listaPostagens | orderBy : key : reverse">
                <div class="row ">
                    <div class="col-md-4 lado1">
                        <img src="{{item.imagem}}" class="w-100">   
                    </div>
                    <div class="col-md-8 ">
                        <div class="card-block ">
                            <h5 class="espaco" style="color: rgba(44, 43, 43, 0.8)">{{item.tema.tema}}<small><br>Postado em {{item.data | date: 'dd/MM/yyyy'}} às {{item.data | date:'HH:mm'}}, {{item.regiao}}.</small></h5>
                         
                            <h4 class="card-title ">{{item.titulo}}</h4>
            
                            <p>{{item.descricaop}}<p>
                            <div class="espaco">
                                
                                <a [routerLink]="['/editar-post', item.id]" class="btn corbtn mr-3" style="background: linear-gradient(90deg, #ff3f60 0%, rgba(223,93,78,1) 100%); color: white;">Editar</a>
                                <a [routerLink]="['/delete-post', item.id]" class="btn corbtn " style="background: linear-gradient(90deg, #ff3f60 0%, rgba(223,93,78,1) 100%); color: white;">Apagar</a>
            
                                <label class="container "> 
                                    <input type="checkbox" [(ngModel)]="item.ativo"  data-md-icheck (change)="marcar($event)"/>
                                         Marcar postagem? <span *ngIf="this.item.ativo"></span><span *ngIf="!this.item.ativo"></span>
                                    
                                      <span class="checkmark"></span>
                               </label> 
                            </div>
                        </div>
                    </div>
                </div>
            </div>  
            </div>
          </div>
        </div>




        <div class="tab-pane fade" id="postagens-temas" role="tabpanel" aria-labelledby="nav-presenca-tab">

          <div class="row mt-3 mb-3">
            <div class="col-md-10 pr-0">
              <input class="form-control w-100" type="search" placeholder="Pesquisar postagem" aria-label="Pesquisar" [(ngModel)]='nomeTema'>
            </div>
            <div class="col-md-2 pl-0">
              <button class="btn btn-outline-warning w-100" type="button" (click)='findByNomeTema()'>Pesquisar</button>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12" *ngFor="let item of listaTemas | orderBy : key : reverse">
              <div *ngFor='let post of item.postagem'>
                <div class="card mt-5 mb-5 fluid">
                  <div class="row ">
                          <div class="col-md-4 lado1">
                              <img src="{{post.imagem}}" class="w-100">   
                          </div>
                          <div class="col-md-8 ">
                              <div class="card-block ">
                                  <h5 class="espaco" style="color: rgba(44, 43, 43, 0.8)">{{post.tema.tema}}<small><br>Postado em {{post.data | date: 'dd/MM/yyyy'}} às {{item.data | date:'HH:mm'}}, {{post.regiao}}.</small></h5>
                               
                                  <h4 class="card-title ">{{post.titulo}}</h4>
                  
                                  <p>{{post.descricao}}<p>
                                  <div class="espaco">
                                      
                                      <a [routerLink]="['/editar-post', item.id]" class="btn corbtn mr-3" style="background: linear-gradient(90deg, #ff3f60 0%, rgba(223,93,78,1) 100%); color: white;">Editar</a>
                                      <a [routerLink]="['/delete-post', item.id]" class="btn corbtn " style="background: linear-gradient(90deg, #ff3f60 0%, rgba(223,93,78,1) 100%); color: white;">Apagar</a>
                  
                                      <label class="container "> 
                                          <input type="checkbox" [(ngModel)]="post.ativo"  data-md-icheck (change)="marcar($event)"/>
                                               Marcar postagem? <span *ngIf="this.post.ativo"></span><span *ngIf="!this.post.ativo"></span>
                                          
                                            <span class="checkmark"></span>
                                     </label> 
                                  </div>
                              </div>
                          </div>
                      
                      
                  </div>
              </div>  
            </div>
            </div>
          </div>

        </div>
      </div>

    </div>
  </div>
</div>
